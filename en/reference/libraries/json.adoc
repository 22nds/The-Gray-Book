= JSON

== Loading a .JSON file

Loading a file is potentially a time-consuming process and thus can interrupt your otherwise smooth framerate. VL therefore provides two options for file readers:

- a simpler to use, but blocking option
- a non-blocking option that requires a few more clicks to set it up:

=== Blocking
Use the *JSONReader [System.XML]* node to read a .JSON file and get the result in the form of an XElement.

image::../../images/JSON-b6e99.png[]

=== Non-Blocking (Reactive)
The simplest way to load a .JSON file asynchronously is to use the *JSONReader (Reactive) [System.XML]* in connection with a *HoldLatest [Reactive]*. Once the file is loaded, the HoldLatest will bang its __On Data__ output and return the files content as an XElement:

But while you're in the reactive/asynchronous world, you can also do some further parsing to the file, by e.g. using the *ForEach [Reactive]*:

Like this loading and parsing is done asynchronously and only when both is done, you get access to the result for further processing.

== Parsing a JSON string

image::..\..\images\json-f4c39.png[]

If you have a string in JSON format, like:

then simply use the *ParseJSON [System.XML]* node to convert it into an XElement for further processing.


== Saving a .JSON file

Saving a file is a potentially time-consuming process and thus can interrupt your otherwise smooth framerate. VL therefore provides two options for file writers: a simpler to use, but blocking option, and non-blocking option that requires a few more clicks to set it up:

=== Blocking
Use the *JSONWriter [System.XML]* node to write a given XElement into a .JSON file.

=== Non-Blocking (Reactive)
The simplest way to save a .JSON file asynchronously is to use the *JSONWriter (Reactive) [System.XML]* in connection with a *ToObservable [Reactive]*. Connect the XElement to the __Message__ input of the ToObservable node and bang its  __Send__ input to start the operation. Once saving is done, the __On Completed__ output of the JSONWriter will bang.

But even creating the XElement structure could already be time-consuming so you could also off-load that part of your patch to the reactive world and do it only just before writing the file by e.g. using the *ForEach [Reactive]*:

Like this creating the XElement and saving the file is done asynchronously and does not interrupt your framerate.

== Converting XElement to a string in JSON format

If you have an XElement that you want to simply convert to a string in JSON format, use the *ToJSON [System.XML]* node.
